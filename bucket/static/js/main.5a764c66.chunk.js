(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1289:function(t){t.exports=[{inputs:[{internalType:"address",name:"underlying_",type:"address"},{internalType:"contract ComptrollerInterface",name:"comptroller_",type:"address"},{internalType:"contract InterestRateModel",name:"interestRateModel_",type:"address"},{internalType:"uint256",name:"initialExchangeRateMantissa_",type:"uint256"},{internalType:"string",name:"name_",type:"string"},{internalType:"string",name:"symbol_",type:"string"},{internalType:"uint8",name:"decimals_",type:"uint8"},{internalType:"address payable",name:"admin_",type:"address"},{internalType:"address",name:"implementation_",type:"address"},{internalType:"bytes",name:"becomeImplementationData",type:"bytes"}],payable:!1,stateMutability:"nonpayable",type:"constructor",signature:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"cashPrior",type:"uint256"},{indexed:!1,internalType:"uint256",name:"interestAccumulated",type:"uint256"},{indexed:!1,internalType:"uint256",name:"borrowIndex",type:"uint256"},{indexed:!1,internalType:"uint256",name:"totalBorrows",type:"uint256"}],name:"AccrueInterest",type:"event",signature:"0x4dec04e750ca11537cabcd8a9eab06494de08da3735bc8871cd41250e190bc04"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Approval",type:"event",signature:"0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"borrower",type:"address"},{indexed:!1,internalType:"uint256",name:"borrowAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"accountBorrows",type:"uint256"},{indexed:!1,internalType:"uint256",name:"totalBorrows",type:"uint256"}],name:"Borrow",type:"event",signature:"0x13ed6866d4e1ee6da46f845c46d7e54120883d75c5ea9a2dacc1c4ca8984ab80"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"error",type:"uint256"},{indexed:!1,internalType:"uint256",name:"info",type:"uint256"},{indexed:!1,internalType:"uint256",name:"detail",type:"uint256"}],name:"Failure",type:"event",signature:"0x45b96fe442630264581b197e84bbada861235052c5a1aadfff9ea4e40a969aa0"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"liquidator",type:"address"},{indexed:!1,internalType:"address",name:"borrower",type:"address"},{indexed:!1,internalType:"uint256",name:"repayAmount",type:"uint256"},{indexed:!1,internalType:"address",name:"cTokenCollateral",type:"address"},{indexed:!1,internalType:"uint256",name:"seizeTokens",type:"uint256"}],name:"LiquidateBorrow",type:"event",signature:"0x298637f684da70674f26509b10f07ec2fbc77a335ab1e7d6215a4b2484d8bb52"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"minter",type:"address"},{indexed:!1,internalType:"uint256",name:"mintAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"mintTokens",type:"uint256"}],name:"Mint",type:"event",signature:"0x4c209b5fc8ad50758f13e2e1088ba56a560dff690a1c6fef26394f4c03821c4f"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"oldAdmin",type:"address"},{indexed:!1,internalType:"address",name:"newAdmin",type:"address"}],name:"NewAdmin",type:"event",signature:"0xf9ffabca9c8276e99321725bcb43fb076a6c66a54b7f21c4e8146d8519b417dc"},{anonymous:!1,inputs:[{indexed:!1,internalType:"contract ComptrollerInterface",name:"oldComptroller",type:"address"},{indexed:!1,internalType:"contract ComptrollerInterface",name:"newComptroller",type:"address"}],name:"NewComptroller",type:"event",signature:"0x7ac369dbd14fa5ea3f473ed67cc9d598964a77501540ba6751eb0b3decf5870d"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"oldImplementation",type:"address"},{indexed:!1,internalType:"address",name:"newImplementation",type:"address"}],name:"NewImplementation",type:"event",signature:"0xd604de94d45953f9138079ec1b82d533cb2160c906d1076d1f7ed54befbca97a"},{anonymous:!1,inputs:[{indexed:!1,internalType:"contract InterestRateModel",name:"oldInterestRateModel",type:"address"},{indexed:!1,internalType:"contract InterestRateModel",name:"newInterestRateModel",type:"address"}],name:"NewMarketInterestRateModel",type:"event",signature:"0xedffc32e068c7c95dfd4bdfd5c4d939a084d6b11c4199eac8436ed234d72f926"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"oldPendingAdmin",type:"address"},{indexed:!1,internalType:"address",name:"newPendingAdmin",type:"address"}],name:"NewPendingAdmin",type:"event",signature:"0xca4f2f25d0898edd99413412fb94012f9e54ec8142f9b093e7720646a95b16a9"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"oldReserveFactorMantissa",type:"uint256"},{indexed:!1,internalType:"uint256",name:"newReserveFactorMantissa",type:"uint256"}],name:"NewReserveFactor",type:"event",signature:"0xaaa68312e2ea9d50e16af5068410ab56e1a1fd06037b1a35664812c30f821460"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"redeemer",type:"address"},{indexed:!1,internalType:"uint256",name:"redeemAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"redeemTokens",type:"uint256"}],name:"Redeem",type:"event",signature:"0xe5b754fb1abb7f01b499791d0b820ae3b6af3424ac1c59768edb53f4ec31a929"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"payer",type:"address"},{indexed:!1,internalType:"address",name:"borrower",type:"address"},{indexed:!1,internalType:"uint256",name:"repayAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"accountBorrows",type:"uint256"},{indexed:!1,internalType:"uint256",name:"totalBorrows",type:"uint256"}],name:"RepayBorrow",type:"event",signature:"0x1a2a22cb034d26d1854bdc6666a5b91fe25efbbb5dcad3b0355478d6f5c362a1"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"benefactor",type:"address"},{indexed:!1,internalType:"uint256",name:"addAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"newTotalReserves",type:"uint256"}],name:"ReservesAdded",type:"event",signature:"0xa91e67c5ea634cd43a12c5a482724b03de01e85ca68702a53d0c2f45cb7c1dc5"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"admin",type:"address"},{indexed:!1,internalType:"uint256",name:"reduceAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"newTotalReserves",type:"uint256"}],name:"ReservesReduced",type:"event",signature:"0x3bad0c59cf2f06e7314077049f48a93578cd16f5ef92329f1dab1420a99c177e"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Transfer",type:"event",signature:"0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef"},{payable:!0,stateMutability:"payable",type:"fallback"},{constant:!1,inputs:[],name:"_acceptAdmin",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function",signature:"0xe9c714f2"},{constant:!1,inputs:[{internalType:"uint256",name:"addAmount",type:"uint256"}],name:"_addReserves",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function",signature:"0x3e941010"},{constant:!1,inputs:[{internalType:"uint256",name:"reduceAmount",type:"uint256"}],name:"_reduceReserves",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function",signature:"0x601a0bf1"},{constant:!1,inputs:[{internalType:"contract ComptrollerInterface",name:"newComptroller",type:"address"}],name:"_setComptroller",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function",signature:"0x4576b5db"},{constant:!1,inputs:[{internalType:"address",name:"implementation_",type:"address"},{internalType:"bool",name:"allowResign",type:"bool"},{internalType:"bytes",name:"becomeImplementationData",type:"bytes"}],name:"_setImplementation",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function",signature:"0x555bcc40"},{constant:!1,inputs:[{internalType:"contract InterestRateModel",name:"newInterestRateModel",type:"address"}],name:"_setInterestRateModel",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function",signature:"0xf2b3abbd"},{constant:!1,inputs:[{internalType:"address payable",name:"newPendingAdmin",type:"address"}],name:"_setPendingAdmin",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function",signature:"0xb71d1a0c"},{constant:!1,inputs:[{internalType:"uint256",name:"newReserveFactorMantissa",type:"uint256"}],name:"_setReserveFactor",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function",signature:"0xfca7820b"},{constant:!0,inputs:[],name:"accrualBlockNumber",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function",signature:"0x6c540baf"},{constant:!1,inputs:[],name:"accrueInterest",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function",signature:"0xa6afed95"},{constant:!0,inputs:[],name:"admin",outputs:[{internalType:"address payable",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function",signature:"0xf851a440"},{constant:!0,inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function",signature:"0xdd62ed3e"},{constant:!1,inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function",signature:"0x095ea7b3"},{constant:!0,inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function",signature:"0x70a08231"},{constant:!1,inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOfUnderlying",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function",signature:"0x3af9e669"},{constant:!1,inputs:[{internalType:"uint256",name:"borrowAmount",type:"uint256"}],name:"borrow",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function",signature:"0xc5ebeaec"},{constant:!1,inputs:[{internalType:"address",name:"account",type:"address"}],name:"borrowBalanceCurrent",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function",signature:"0x17bfdfbc"},{constant:!0,inputs:[{internalType:"address",name:"account",type:"address"}],name:"borrowBalanceStored",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function",signature:"0x95dd9193"},{constant:!0,inputs:[],name:"borrowIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function",signature:"0xaa5af0fd"},{constant:!0,inputs:[],name:"borrowRatePerBlock",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function",signature:"0xf8f9da28"},{constant:!0,inputs:[],name:"comptroller",outputs:[{internalType:"contract ComptrollerInterface",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function",signature:"0x5fe3b567"},{constant:!0,inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function",signature:"0x313ce567"},{constant:!1,inputs:[{internalType:"bytes",name:"data",type:"bytes"}],name:"delegateToImplementation",outputs:[{internalType:"bytes",name:"",type:"bytes"}],payable:!1,stateMutability:"nonpayable",type:"function",signature:"0x0933c1ed"},{constant:!0,inputs:[{internalType:"bytes",name:"data",type:"bytes"}],name:"delegateToViewImplementation",outputs:[{internalType:"bytes",name:"",type:"bytes"}],payable:!1,stateMutability:"view",type:"function",signature:"0x4487152f"},{constant:!1,inputs:[],name:"exchangeRateCurrent",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function",signature:"0xbd6d894d"},{constant:!0,inputs:[],name:"exchangeRateStored",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function",signature:"0x182df0f5"},{constant:!0,inputs:[{internalType:"address",name:"account",type:"address"}],name:"getAccountSnapshot",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function",signature:"0xc37f68e2"},{constant:!0,inputs:[],name:"getCash",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function",signature:"0x3b1d21a2"},{constant:!0,inputs:[],name:"implementation",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function",signature:"0x5c60da1b"},{constant:!0,inputs:[],name:"interestRateModel",outputs:[{internalType:"contract InterestRateModel",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function",signature:"0xf3fdb15a"},{constant:!0,inputs:[],name:"isCToken",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function",signature:"0xfe9c44ae"},{constant:!1,inputs:[{internalType:"address",name:"borrower",type:"address"},{internalType:"uint256",name:"repayAmount",type:"uint256"},{internalType:"contract CTokenInterface",name:"cTokenCollateral",type:"address"}],name:"liquidateBorrow",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function",signature:"0xf5e3c462"},{constant:!1,inputs:[{internalType:"uint256",name:"mintAmount",type:"uint256"}],name:"mint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function",signature:"0xa0712d68"},{constant:!0,inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function",signature:"0x06fdde03"},{constant:!0,inputs:[],name:"pendingAdmin",outputs:[{internalType:"address payable",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function",signature:"0x26782247"},{constant:!1,inputs:[{internalType:"uint256",name:"redeemTokens",type:"uint256"}],name:"redeem",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function",signature:"0xdb006a75"},{constant:!1,inputs:[{internalType:"uint256",name:"redeemAmount",type:"uint256"}],name:"redeemUnderlying",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function",signature:"0x852a12e3"},{constant:!1,inputs:[{internalType:"uint256",name:"repayAmount",type:"uint256"}],name:"repayBorrow",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function",signature:"0x0e752702"},{constant:!1,inputs:[{internalType:"address",name:"borrower",type:"address"},{internalType:"uint256",name:"repayAmount",type:"uint256"}],name:"repayBorrowBehalf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function",signature:"0x2608f818"},{constant:!0,inputs:[],name:"reserveFactorMantissa",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function",signature:"0x173b9904"},{constant:!1,inputs:[{internalType:"address",name:"liquidator",type:"address"},{internalType:"address",name:"borrower",type:"address"},{internalType:"uint256",name:"seizeTokens",type:"uint256"}],name:"seize",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function",signature:"0xb2a02ff1"},{constant:!0,inputs:[],name:"supplyRatePerBlock",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function",signature:"0xae9d70b0"},{constant:!0,inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function",signature:"0x95d89b41"},{constant:!0,inputs:[],name:"totalBorrows",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function",signature:"0x47bd3718"},{constant:!1,inputs:[],name:"totalBorrowsCurrent",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function",signature:"0x73acee98"},{constant:!0,inputs:[],name:"totalReserves",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function",signature:"0x8f840ddd"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function",signature:"0x18160ddd"},{constant:!1,inputs:[{internalType:"address",name:"dst",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function",signature:"0xa9059cbb"},{constant:!1,inputs:[{internalType:"address",name:"src",type:"address"},{internalType:"address",name:"dst",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function",signature:"0x23b872dd"},{constant:!0,inputs:[],name:"underlying",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function",signature:"0x6f307dc3"}]},129:function(t,e,n){"use strict";var a=n(0),r=n.n(a),i=n(17);function o(t,e,n){return s.apply(this,arguments)}function s(){return(s=Object(i.a)(r.a.mark(function t(e,n,a){var i;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getPastEvents(n,{fromBlock:0,toBlock:"latest",filter:a});case 2:return i=t.sent,t.abrupt("return",i[0]);case 4:case"end":return t.stop()}},t)}))).apply(this,arguments)}e.a={getEvent:function(t,e,n){return new Promise(function(a){t[e](n).once("data",function(t){clearInterval(s),a(t)});var s=setInterval(Object(i.a)(r.a.mark(function i(){var u;return r.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,o(t,e,n);case 2:(u=r.sent)&&(clearInterval(s),a(u));case 4:case"end":return r.stop()}},i)})),3e3)})},getExistingEvent:o,readEventFromTransaction:function(t,e,n,a){var r=n.abi.find(function(t){return"event"==t.type&&t.name==a}).inputs;return e.receipt.rawLogs.filter(function(t){return t.address==n.address}).map(function(e){return t.eth.abi.decodeLog(r,e.data,e.topics.slice(1))})[0]}}},1303:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return P});var a=n(32),r=n(0),i=n.n(r),o=n(17),s=n(15),u=n(16),c=n(76),p=n(129),d=n(170),l=n.n(d),f=n(723),y=n(1311),m=n(1312),b=n(1313),h=n(1314),v=(n(2049),n(1315)),x=n(1316),g=n(1317),w=n(1318),k=n(1319),T=l()(y),O=l()(m),C=l()(b),E=l()(h),_=l()(v),j=l()(x),A=l()(g),S=l()(w),M=l()(k),P=function(){function t(e){Object(s.a)(this,t),this.config=e}return Object(u.a)(t,null,[{key:"withConfig",value:function(){var e=Object(o.a)(i.a.mark(function e(n){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=new t(n),e.next=3,a.resolveContracts();case 3:return c.a.setElectrumConfig(n.electrum),e.abrupt("return",a);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}]),Object(u.a)(t,[{key:"availableSatoshiLotSizes",value:function(){var t=Object(o.a)(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.systemContract.getAllowedLotSizes();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"withSatoshiLotSize",value:function(){var t=Object(o.a)(i.a.mark(function t(e,n){var a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.systemContract.isAllowedLotSize(e);case 2:if(t.sent){t.next=13;break}return t.t0=Error,t.t1="Lot size ".concat(e," is not permitted; only "),t.t2="one of ",t.next=8,this.availableSatoshiLotSizes();case 8:throw t.t3=t.sent.join(","),t.t4=t.t2.concat.call(t.t2,t.t3," "),t.t5=t.t1+t.t4,t.t6=t.t5+"can be used.",new t.t0(t.t6);case 13:return a=B.forLotSize(this,e,n),t.abrupt("return",a);case 15:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"withAddress",value:function(){var t=Object(o.a)(i.a.mark(function t(e,n){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B.forAddress(this,e,n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"resolveContracts",value:function(){var t=Object(o.a)(i.a.mark(function t(){var e,n,r=this;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=function(t){var e=Object(a.a)(t,2),n=e[0],i=e[1];return n.setProvider(r.config.web3.currentProvider),n.deployed().then(function(t){return r[i]=t})},n=[[T,"constantsContract"],[O,"systemContract"],[j,"tokenContract"],[C,"depositTokenContract"],[A,"feeRebateTokenContract"],[E,"depositContract"],[_,"depositFactoryContract"],[S,"vendingMachineContract"]],t.next=4,Promise.all(n.map(e));case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()},{key:"createNewDepositContract",value:function(){var t=Object(o.a)(i.a.mark(function t(e){var n,a,r,o;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.constantsContract.getFunderBondAmount();case 2:return n=t.sent,t.next=5,this.config.web3.eth.getBalance(this.config.web3.eth.defaultAccount);case 5:if(a=t.sent,!n.lt(a)){t.next=8;break}throw"Insufficient balance ".concat(a.toString()," to open ")+"deposit (required: ".concat(n.toString(),").");case 8:return t.next=10,this.depositFactoryContract.createDeposit(this.systemContract.address,this.tokenContract.address,this.depositTokenContract.address,this.feeRebateTokenContract.address,this.vendingMachineContract.address,1,1,e,{from:this.config.web3.eth.defaultAccount,value:n});case 10:if(r=t.sent,o=p.a.readEventFromTransaction(this.config.web3,r,this.systemContract,"Created")){t.next=14;break}throw new Error("Transaction failed to include keep creation event. "+"Transaction was: ".concat(JSON.stringify(r),"."));case 14:return t.abrupt("return",{depositAddress:o._depositContractAddress,keepAddress:o._keepAddress});case 15:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}]),t}(),B=function(){function e(t,n,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};if(Object(s.a)(this,e),!a)throw"Keep contract required for Deposit instantiation.";this.factory=t,this.address=n.address,this.keepContract=a,this.contract=n,this.activeStatePromise=this.waitForActiveState(),this.publicKeyPoint=this.findOrWaitForPublicKeyPoint(r),this.bitcoinAddress=this.publicKeyPoint.then(this.publicKeyPointToBitcoinAddress.bind(this))}return Object(u.a)(e,null,[{key:"forLotSize",value:function(){var t=Object(o.a)(i.a.mark(function t(n,a){var r,o,s,u,c,p,d=arguments;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=d.length>2&&void 0!==d[2]?d[2]:function(){},console.log("Creating new deposit contract with lot size",a.toNumber(),"satoshis..."),t.next=4,n.createNewDepositContract(a);case 4:return o=t.sent,s=o.depositAddress,u=o.keepAddress,r(1),console.log("Looking up new deposit with address ".concat(s," backed by ")+"keep at address ".concat(u,"...")),t.next=11,E.at(s);case 11:return c=t.sent,M.setProvider(n.config.web3.currentProvider),t.next=15,M.at(u);case 15:return p=t.sent,t.abrupt("return",new e(n,c,p,r));case 17:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"forAddress",value:function(){var t=Object(o.a)(i.a.mark(function t(n,a,r){var o,s,u;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Looking up Deposit contract at address ".concat(a,"...")),t.next=3,E.at(a);case 3:return o=t.sent,console.log("Looking up Created event for deposit ".concat(a,"...")),t.next=7,p.a.getExistingEvent(n.systemContract,"Created",{_depositContractAddress:a});case 7:if(s=t.sent){t.next=10;break}throw new Error("Could not find creation event for deposit at address ".concat(a,"."));case 10:return console.log("Found keep address ".concat(s.args._keepAddress,".")),M.setProvider(n.config.web3.currentProvider),t.next=14,M.at(s.args._keepAddress);case 14:return u=t.sent,t.abrupt("return",new e(n,o,u,r));case 16:case"end":return t.stop()}},t)}));return function(e,n,a){return t.apply(this,arguments)}}()},{key:"forTDT",value:function(){var t=Object(o.a)(i.a.mark(function t(n,a){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new e(n,""));case 1:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()}]),Object(u.a)(e,[{key:"getSatoshiLotSize",value:function(){var t=Object(o.a)(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.contract.lotSizeSatoshis();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"getBitcoinAddress",value:function(){var t=Object(o.a)(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.bitcoinAddress;case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"getTDT",value:function(){var t=Object(o.a)(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{});case 1:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()},{key:"getFRT",value:function(){var t=Object(o.a)(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{});case 1:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()},{key:"getOwner",value:function(){var t=Object(o.a)(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.factory.depositTokenContract.ownerOf(this.address);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"inVendingMachine",value:function(){var t=Object(o.a)(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getOwner();case 2:return t.t0=t.sent,t.t1=this.factory.vendingMachineContract.address,t.abrupt("return",t.t0==t.t1);case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"onBitcoinAddressAvailable",value:function(t){this.bitcoinAddress.then(t)}},{key:"onActive",value:function(t){var e=this;this.activeStatePromise.then(function(){t(e)})}},{key:"onReadyForProof",value:function(t){}},{key:"mintTBTC",value:function(){var t=Object(o.a)(i.a.mark(function t(){var e,n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.contract.inActive();case 2:if(t.sent){t.next=4;break}throw new Error("Can't mint TBTC with a deposit that isn't in ACTIVE state.");case 4:return console.log("Approving transfer of deposit ".concat(this.address," TDT to Vending Machine...")),t.next=7,this.factory.depositTokenContract.approve(this.factory.vendingMachineContract.address,this.address,{from:this.factory.config.web3.eth.defaultAccount});case 7:return console.log("Minting TBTC..."),t.next=10,this.factory.vendingMachineContract.tdtToTbtc(this.address,{from:this.factory.config.web3.eth.defaultAccount});case 10:return e=t.sent,n=p.a.readEventFromTransaction(this.factory.config.web3,e,this.factory.tokenContract,"Transfer"),console.log("Found Transfer event for",n.value,"TBTC."),t.abrupt("return",n.value);case 14:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"qualifyAndMintTBTC",value:function(){var t=Object(o.a)(i.a.mark(function t(){var e,n,a,r,o,s,u,d;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.bitcoinAddress;case 2:return e=t.sent,t.next=5,this.getSatoshiLotSize();case 5:return n=t.sent.toNumber(),t.next=8,c.a.Transaction.find(e,n);case 8:if(a=t.sent){t.next=11;break}throw new Error("Funding transaction not found for deposit ".concat(this.address,"."));case 11:return t.next=13,this.factory.constantsContract.getTxProofDifficultyFactor();case 13:return r=t.sent.toNumber(),t.next=16,c.a.Transaction.checkForConfirmations(a,r);case 16:if(o=t.sent){t.next=19;break}throw new Error("Funding transaction did not have sufficient confirmations; "+"expected ".concat(r.toNumber(),"."));case 19:return console.log("Approving transfer of deposit ".concat(this.address," TDT to Vending Machine...")),t.next=22,this.factory.depositTokenContract.approve(this.factory.vendingMachineContract.address,this.address,{from:this.factory.config.web3.eth.defaultAccount});case 22:return console.log("Qualifying and minting off of deposit ".concat(this.address," for ")+"Bitcoin transaction ".concat(a.transactionID,"..."),a,o),t.next=25,this.constructFundingProof(a,r);case 25:return(s=t.sent).unshift(this.address),s.push({from:this.factory.config.web3.eth.defaultAccount}),t.next=30,this.factory.vendingMachineContract.unqualifiedDepositToTbtc.apply(this.factory.vendingMachineContract,s);case 30:return u=t.sent,d=p.a.readEventFromTransaction(this.factory.config.web3,u,this.factory.tokenContract,"Transfer"),t.abrupt("return",d.value.div(this.factory.config.web3.utils.toBN(10).pow(18)));case 33:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"getRedemptionCost",value:function(){var t=Object(o.a)(i.a.mark(function t(){var e,n,a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.inVendingMachine();case 2:if(!t.sent){t.next=13;break}return t.next=5,this.contract.getOwnerRedemptionTbtcRequirement(this.factory.config.web3.eth.defaultAccount);case 5:return e=t.sent,t.next=8,this.getSatoshiLotSize();case 8:return n=t.sent,a=this.factory.config.web3.utils.toBN,t.abrupt("return",n.mul(a(10).pow(a(10))).add(e));case 13:return t.next=15,this.contract.getRedemptionTbtcRequirement(this.factory.config.web3.eth.defaultAccount);case 15:return t.abrupt("return",t.sent);case 16:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"getCurrentRedemption",value:function(){var t=Object(o.a)(i.a.mark(function t(){var e;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getLatestRedemptionDetails();case 2:return e=t.sent,t.abrupt("return",new f.a(this,e));case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"requestRedemption",value:function(){var e=Object(o.a)(i.a.mark(function e(n){var a,r,o,s,u,d,l,y,m,b,h,v,x,g,w;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.inVendingMachine();case 2:return a=e.sent,r=this.factory.config.web3.eth.defaultAccount,e.next=6,this.getOwner();case 6:if(o=e.sent,s=o==r,a||s){e.next=10;break}throw new Error("Redemption is currently only supported for deposits owned by "+"this account (".concat(r,") or the tBTC Vending Machine ")+"(".concat(this.factory.vendingMachineContract.address,"). This ")+"deposit is owned by ".concat(o,"."));case 10:if(null!==(u=c.a.Address.pubKeyHashFrom(n))){e.next=13;break}throw new Error("".concat(n," is not a P2WPKH address. Currently only ")+"P2WPKH addresses are supported for redemption.");case 13:return e.next=15,this.getRedemptionCost();case 15:return d=e.sent,e.next=18,this.factory.tokenContract.balanceOf(r);case 18:if(l=e.sent,!d.gt(l)){e.next=21;break}throw new Error("Account ".concat(r," does not have the required balance of ")+"".concat(d.toString()," to redeem; it only has ")+"".concat(l.toString()," available."));case 21:return y=this.factory.config.web3.utils.toBN,console.log("Looking up UTXO size and transaction fee for redemption transaction..."),e.next=25,c.a.Transaction.estimateFee(this.factory.constantsContract);case 25:return m=e.sent,e.next=28,this.contract.utxoSize();case 28:if(b=e.sent,h=y(b).sub(y(m)),v=h.toArrayLike(t,"le",8),!a){e.next=40;break}return console.log("Approving transfer of ".concat(d," to the vending machine....")),this.factory.tokenContract.approve(this.factory.vendingMachineContract.address,d,{from:r}),console.log("Initiating redemption of deposit ".concat(this.address," from ")+"vending machine..."),e.next=37,this.factory.vendingMachineContract.tbtcToBtc(this.address,v,u,r,{from:r});case 37:x=e.sent,e.next=46;break;case 40:return console.log("Approving transfer of ".concat(d," to the deposit...")),this.factory.tokenContract.approve(this.address,d,{from:r}),console.log("Initiating redemption from deposit ".concat(this.address,"...")),e.next=45,this.contract.requestRedemption(v,u,{from:r});case 45:x=e.sent;case 46:return g=p.a.readEventFromTransaction(this.factory.config.web3,x,this.factory.systemContract,"RedemptionRequested"),w=this.redemptionDetailsFromEvent(g),e.abrupt("return",new f.a(this,w));case 49:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getLatestRedemptionDetails",value:function(){var t=Object(o.a)(i.a.mark(function t(){var e;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.contract.inActive();case 2:if(!t.sent){t.next=4;break}return t.abrupt("return",null);case 4:return t.next=6,p.a.getExistingEvent(this.factory.systemContract,"RedemptionRequested",{_depositContractAddress:this.address});case 6:if(e=t.sent){t.next=9;break}return t.abrupt("return",null);case 9:return t.abrupt("return",this.redemptionDetailsFromEvent(e.args));case 10:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"autoSubmit",value:function(){var t=this;this.autoSubmitting||(this.autoSubmitting=!0,this.bitcoinAddress.then(function(){var e=Object(o.a)(i.a.mark(function e(n){var a,r,o,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getSatoshiLotSize();case 2:return a=e.sent.toNumber(),console.log("Monitoring Bitcoin for transaction to address ".concat(n,"...")),e.next=6,c.a.Transaction.findOrWaitFor(n,a);case 6:return r=e.sent,e.next=9,t.factory.constantsContract.getTxProofDifficultyFactor();case 9:return o=e.sent.toNumber(),console.log("Waiting for ".concat(o," confirmations for ")+"Bitcoin transaction ".concat(r.transactionID,"...")),e.next=13,c.a.Transaction.waitForConfirmations(r,o);case 13:return console.log("Submitting funding proof to deposit ".concat(t.address," for ")+"Bitcoin transaction ".concat(r.transactionID,"...")),e.next=16,t.constructFundingProof(r,o);case 16:(s=e.sent).push({from:t.factory.config.web3.eth.defaultAccount}),t.contract.provideBTCFundingProof.apply(t.contract,s);case 19:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()))}},{key:"findOrWaitForPublicKeyPoint",value:function(){var t=Object(o.a)(i.a.mark(function t(){var e,n,a,r,o,s,u=arguments;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=u.length>0&&void 0!==u[0]?u[0]:function(){},t.next=3,this.readPublishedPubkeyEvent();case 3:if(!(n=t.sent)){t.next=8;break}return e(0),console.log("Found existing Bitcoin address for deposit ".concat(this.address,"...")),t.abrupt("return",{x:n.args._signingGroupPubkeyX,y:n.args._signingGroupPubkeyY});case 8:return console.log("Waiting for deposit ".concat(this.address," keep public key...")),t.next=11,p.a.getEvent(this.keepContract,"PublicKeyPublished");case 11:return console.log("Waiting for deposit ".concat(this.address," to retrieve public key...")),t.next=14,this.contract.retrieveSignerPubkey({from:this.factory.config.web3.eth.defaultAccount});case 14:return a=t.sent,e(0),console.log("Found public key for deposit ".concat(this.address,"...")),r=p.a.readEventFromTransaction(this.factory.config.web3,a,this.factory.systemContract,"RegisteredPubkey"),o=r._signingGroupPubkeyX,s=r._signingGroupPubkeyY,t.abrupt("return",{x:o,y:s});case 19:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"waitForActiveState",value:function(){var t=Object(o.a)(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.contract.inActive();case 2:if(!t.sent){t.next=5;break}return t.abrupt("return",!0);case 5:return console.log("Monitoring deposit ".concat(this.address," for transition to ACTIVE.")),t.next=8,p.a.getEvent(this.factory.systemContract,"Funded",{_depositContractAddress:this.address});case 8:return console.log("Deposit ".concat(this.address," transitioned to ACTIVE.")),t.abrupt("return",!0);case 10:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"readPublishedPubkeyEvent",value:function(){var t=Object(o.a)(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",p.a.getExistingEvent(this.factory.systemContract,"RegisteredPubkey",{_depositContractAddress:this.address}));case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"publicKeyPointToBitcoinAddress",value:function(){var t=Object(o.a)(i.a.mark(function t(e){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",c.a.Address.publicKeyPointToP2WPKHAddress(e.x,e.y,this.factory.config.bitcoinNetwork));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"constructFundingProof",value:function(){var e=Object(o.a)(i.a.mark(function e(n,a){var r,o,s,u,p,d,l,f,y,m,b;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.transactionID,o=n.outputPosition,e.next=3,c.a.Transaction.getSPVProof(r,a);case 3:return s=e.sent,u=s.parsedTransaction,p=s.merkleProof,d=s.chainHeaders,l=s.txInBlockIndex,f=u.version,y=u.txInVector,m=u.txOutVector,b=u.locktime,e.abrupt("return",[t.from(f,"hex"),t.from(y,"hex"),t.from(m,"hex"),t.from(b,"hex"),o,t.from(p,"hex"),l,t.from(d,"hex")]);case 10:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"redemptionDetailsFromEvent",value:function(t){var e=t._utxoSize,n=t._requesterPKH,a=t._requestedFee,r=t._outpoint,i=t._digest,o=this.factory.config.web3.utils.toBN;return{utxoSize:o(e),requesterPKH:n,requestedFee:o(a),outpoint:r,digest:i}}}]),e}()}).call(this,n(1).Buffer)},1304:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return l});var a=n(0),r=n.n(a),i=n(17),o=n(15),s=n(16),u=n(1305),c=n.n(u),p=n(1306),d=n.n(p).a.deriveRoot,l=function(){function e(t){Object(o.a)(this,e),this.client=t}return Object(s.a)(e,[{key:"getTransactionProof",value:function(){var t=Object(i.a)(r.a.mark(function t(e,n){var a,i,o,s,u;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.client.getTransaction(e).catch(function(t){throw new Error("failed to get transaction: [".concat(t,"]"))});case 2:if(!((a=t.sent).confirmations<n)){t.next=5;break}throw new Error("transaction confirmations number [".concat(a.confirmations,"] is not enough, required [").concat(n,"]"));case 5:return t.next=7,this.client.latestBlockHeight().catch(function(t){throw new Error("failed to get latest block height: [".concat(t,"]"))});case 7:return i=t.sent,o=i-a.confirmations+1,t.next=11,this.client.getHeadersChain(o,n).catch(function(t){throw new Error("failed to get headers chain: [".concat(t,"]"))});case 11:return s=t.sent,t.next=14,this.client.getMerkleProof(e,o).catch(function(t){throw new Error("failed to get merkle proof: [".concat(t,"]"))});case 14:return u=t.sent,t.abrupt("return",{tx:a.hex,merkleProof:u.proof,txInBlockIndex:u.position,chainHeaders:s});case 16:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"verifyMerkleProof",value:function(){var e=Object(i.a)(r.a.mark(function e(n,a,i,o){var s,u,p,l,f,y,m;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.from(n,"hex"),e.next=3,this.client.getMerkleRoot(o).catch(function(t){throw new Error("failed to get merkle root: [".concat(t,"]"))});case 3:for(u=e.sent,u=t.from(u,"hex"),p=[],l=0;l<Math.floor(s.length/32);l++)f=s.slice(32*l,32*(l+1)),p.push(f);if(y=t.from(a,"hex").reverse(),m=d(c.a,y,p,i),!u.equals(m)){e.next=13;break}return e.abrupt("return",!0);case 13:return e.abrupt("return",!1);case 14:case"end":return e.stop()}},e,this)}));return function(t,n,a,r){return e.apply(this,arguments)}}()}]),e}()}).call(this,n(1).Buffer)},1307:function(t,e,n){"use strict";n.d(e,"a",function(){return y});var a=n(382),r=n.n(a),i=n(28),o=n.n(i),s=r.a.TX;function u(t){var e=o.a.write();return e.writeU32(t.version),f(e)}function c(t){return l(t.inputs)}function p(t){return l(t.outputs)}function d(t){var e=o.a.write();return e.writeU32(t.locktime),f(e)}function l(t){var e=o.a.write();e.writeVarint(t.length);var n=!0,a=!1,r=void 0;try{for(var i,s=t[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){i.value.toWriter(e)}}catch(u){a=!0,r=u}finally{try{n||null==s.return||s.return()}finally{if(a)throw r}}return f(e)}function f(t){return t.render().toString("hex")}var y={parse:function(t){var e=s.fromRaw(t,"hex");return{version:u(e),txInVector:c(e),txOutVector:p(e),locktime:d(e)}}}},1308:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return l});var a=n(0),r=n.n(a),i=n(17),o=n(15),s=n(16),u=n(1309),c=n.n(u),p=n(1310),d=n.n(p).a.digest,l=function(){function e(t){Object(o.a)(this,e),this.electrumClient=new c.a(t.server,t.port,t.protocol,t.options)}return Object(s.a)(e,[{key:"connect",value:function(){var t=Object(i.a)(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Connecting to electrum server..."),t.next=3,this.electrumClient.connect("tbtc","1.4.2").catch(function(t){throw new Error("failed to connect: [".concat(t,"]"))});case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"close",value:function(){var t=Object(i.a)(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:console.log("Closing connection to electrum server..."),this.electrumClient.close();case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"latestBlockHeight",value:function(){var t=Object(i.a)(r.a.mark(function t(){var e;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.electrumClient.blockchain_headers_subscribe().catch(function(t){throw new Error("failed to get block header: [".concat(t,"]"))});case 2:return e=t.sent,t.abrupt("return",e.height);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"getTransaction",value:function(){var t=Object(i.a)(r.a.mark(function t(e){var n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.electrumClient.blockchain_transaction_get(e,!0).catch(function(t){throw new Error("failed to get transaction: [".concat(t,"]"))});case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"broadcastTransaction",value:function(){var t=Object(i.a)(r.a.mark(function t(e){var n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.electrumClient.blockchain_transaction_broadcast(e).catch(function(t){throw new Error("failed to broadcast transaction: [".concat(t,"]"))});case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getUnspentToScript",value:function(){var t=Object(i.a)(r.a.mark(function t(e){var n,a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=m(e),t.next=3,this.electrumClient.blockchain_scripthash_listunspent(n).catch(function(t){throw new Error(JSON.stringify(t))});case 3:return a=t.sent,t.abrupt("return",a);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"onTransactionToScript",value:function(){var t=Object(i.a)(r.a.mark(function t(e,n){var a,o,s,u=this;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=m(e),t.next=3,this.electrumClient.blockchain_scripthash_subscribe(a).catch(function(t){throw new Error("failed to subscribe: ".concat(t))});case 3:return o=t.sent,t.next=6,n(o);case 6:if(!(s=t.sent)){t.next=11;break}return t.next=10,this.electrumClient.blockchain_scripthash_unsubscribe(a).catch(function(t){throw new Error("failed to unsubscribe: ".concat(t))});case 10:return t.abrupt("return",s);case 11:return t.abrupt("return",new Promise(function(){var t=Object(i.a)(r.a.mark(function t(e){var o,s,c;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,o="blockchain.scripthash.subscribe",s=u.electrumClient,c=function(){var t=Object(i.a)(r.a.mark(function t(i){var u,p,d;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(u=i[0],p=i[1],console.log("Received notification for script hash: [".concat(u,"] with status: [").concat(p,"]")),u!=a){t.next=13;break}return t.next=6,n(p);case 6:if(!(d=t.sent)){t.next=13;break}return t.next=10,s.subscribe.off(o,c);case 10:return t.next=12,s.blockchain_scripthash_unsubscribe(a).catch(function(t){throw new Error("failed to unsubscribe: ".concat(t))});case 12:return t.abrupt("return",e(d));case 13:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),u.electrumClient.subscribe.on(o,c),t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(0),new Error("failed listening for notification: ".concat(t.t0));case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()));case 12:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"onNewBlock",value:function(){var t=Object(i.a)(r.a.mark(function t(e){var n,a,o=this;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.electrumClient.blockchain_headers_subscribe().catch(function(t){throw new Error("failed to subscribe: ".concat(t))});case 2:return n=t.sent,t.next=5,e(n);case 5:if(!(a=t.sent)){t.next=8;break}return t.abrupt("return",a);case 8:return t.abrupt("return",new Promise(function(){var t=Object(i.a)(r.a.mark(function t(n){var a,s,u;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,a="blockchain.headers.subscribe",s=o.electrumClient,u=function(){var t=Object(i.a)(r.a.mark(function t(i){var o,c,p,d,l,f,y,m;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:o=!0,c=!1,p=void 0,t.prev=3,d=i[Symbol.iterator]();case 5:if(o=(l=d.next()).done){t.next=19;break}return f=l.value,y=f.height,console.log("Received notification of a new block at height: [".concat(y,"]")),t.next=11,e(f);case 11:if(!(m=t.sent)){t.next=16;break}return t.next=15,s.subscribe.off(a,u);case 15:return t.abrupt("return",n(m));case 16:o=!0,t.next=5;break;case 19:t.next=25;break;case 21:t.prev=21,t.t0=t.catch(3),c=!0,p=t.t0;case 25:t.prev=25,t.prev=26,o||null==d.return||d.return();case 28:if(t.prev=28,!c){t.next=31;break}throw p;case 31:return t.finish(28);case 32:return t.finish(25);case 33:case"end":return t.stop()}},t,null,[[3,21,25,33],[26,,28,32]])}));return function(e){return t.apply(this,arguments)}}(),o.electrumClient.subscribe.on(a,u),console.log("Registered listener for ".concat(a," event")),t.next=11;break;case 8:throw t.prev=8,t.t0=t.catch(0),new Error("failed listening for notification: ".concat(t.t0));case 11:case"end":return t.stop()}},t,null,[[0,8]])}));return function(e){return t.apply(this,arguments)}}()));case 9:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getMerkleRoot",value:function(){var t=Object(i.a)(r.a.mark(function t(e){var n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.electrumClient.blockchain_block_header(e).catch(function(t){throw new Error("failed to get block header: [".concat(t,"]"))});case 2:return n=t.sent,t.abrupt("return",f(n).slice(36,68));case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getHeadersChain",value:function(){var t=Object(i.a)(r.a.mark(function t(e,n){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.electrumClient.blockchain_block_headers(e,n+1).catch(function(t){throw new Error("failed to get block headers: [".concat(t,"]"))});case 2:return a=t.sent,t.abrupt("return",a.hex);case 4:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"getMerkleProof",value:function(){var e=Object(i.a)(r.a.mark(function e(n,a){var i,o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.electrumClient.blockchain_transaction_getMerkle(n,a).catch(function(t){throw new Error("failed to get transaction merkle: [".concat(t,"]"))});case 2:return i=e.sent,o=t.from(""),i.merkle.forEach(function(e){o=t.concat([o,f(e).reverse()])}),e.abrupt("return",{proof:y(o),position:i.pos});case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"findOutputForAddress",value:function(){var t=Object(i.a)(r.a.mark(function t(e,n){var a,i,o,s,u,c,p,d;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getTransaction(e).catch(function(t){throw new Error("failed to get transaction: [".concat(t,"]"))});case 2:a=t.sent,i=a.vout,o=0;case 5:if(!(o<i.length)){t.next=35;break}s=!0,u=!1,c=void 0,t.prev=9,p=i[o].scriptPubKey.addresses[Symbol.iterator]();case 11:if(s=(d=p.next()).done){t.next=18;break}if(d.value!=n){t.next=15;break}return t.abrupt("return",o);case 15:s=!0,t.next=11;break;case 18:t.next=24;break;case 20:t.prev=20,t.t0=t.catch(9),u=!0,c=t.t0;case 24:t.prev=24,t.prev=25,s||null==p.return||p.return();case 27:if(t.prev=27,!u){t.next=30;break}throw c;case 30:return t.finish(27);case 31:return t.finish(24);case 32:o++,t.next=5;break;case 35:throw new Error("output for address ".concat(n," not found"));case 36:case"end":return t.stop()}},t,this,[[9,20,24,32],[25,,27,31]])}));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function f(e){return t.from(e,"hex")}function y(e){return t.from(e).toString("hex")}function m(t){return y(d(f(t)).reverse())}}).call(this,n(1).Buffer)},1320:function(t,e,n){t.exports=n.p+"static/media/dots.e5a1bfe3.svg"},1321:function(t,e,n){t.exports=n.p+"static/media/one.00f0b5f4.svg"},1322:function(t,e,n){t.exports=n.p+"static/media/two.94e400be.svg"},1323:function(t,e,n){t.exports=n.p+"static/media/done.98d0e36d.svg"},1457:function(t,e,n){t.exports=n(3319)},1462:function(t,e,n){},1475:function(t,e){},1477:function(t,e){},1507:function(t,e){},1508:function(t,e){},1869:function(t,e){function n(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=1869},2027:function(t,e){function n(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=2027},2079:function(t,e,n){},2179:function(t,e){},2196:function(t,e){},2269:function(t,e){},2271:function(t,e){},2433:function(t,e){},2520:function(t,e){},2546:function(t,e){},2728:function(t,e){},2825:function(t,e){},2839:function(t,e){},2868:function(t,e){},2893:function(t,e){},2912:function(t,e){},2914:function(t,e){},2991:function(t,e){},3024:function(t,e){},3071:function(t,e){},3087:function(t,e){},3088:function(t,e){},3150:function(t,e){},3155:function(t,e){},3164:function(t,e){},3249:function(t){t.exports=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"spender",type:"address"},{name:"value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"spender",type:"address"},{name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"account",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"spender",type:"address"},{name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{inputs:[{name:"_VendingMachine",type:"address"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{constant:!1,inputs:[{name:"_account",type:"address"},{name:"_amount",type:"uint256"}],name:"mint",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_account",type:"address"},{name:"_amount",type:"uint256"}],name:"burnFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_amount",type:"uint256"}],name:"burn",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"}]},3254:function(t){t.exports=[{name:"TokenPurchase",inputs:[{type:"address",name:"buyer",indexed:!0},{type:"uint256",name:"eth_sold",indexed:!0},{type:"uint256",name:"tokens_bought",indexed:!0}],anonymous:!1,type:"event"},{name:"EthPurchase",inputs:[{type:"address",name:"buyer",indexed:!0},{type:"uint256",name:"tokens_sold",indexed:!0},{type:"uint256",name:"eth_bought",indexed:!0}],anonymous:!1,type:"event"},{name:"AddLiquidity",inputs:[{type:"address",name:"provider",indexed:!0},{type:"uint256",name:"eth_amount",indexed:!0},{type:"uint256",name:"token_amount",indexed:!0}],anonymous:!1,type:"event"},{name:"RemoveLiquidity",inputs:[{type:"address",name:"provider",indexed:!0},{type:"uint256",name:"eth_amount",indexed:!0},{type:"uint256",name:"token_amount",indexed:!0}],anonymous:!1,type:"event"},{name:"Transfer",inputs:[{type:"address",name:"_from",indexed:!0},{type:"address",name:"_to",indexed:!0},{type:"uint256",name:"_value",indexed:!1}],anonymous:!1,type:"event"},{name:"Approval",inputs:[{type:"address",name:"_owner",indexed:!0},{type:"address",name:"_spender",indexed:!0},{type:"uint256",name:"_value",indexed:!1}],anonymous:!1,type:"event"},{name:"setup",outputs:[],inputs:[{type:"address",name:"token_addr"}],constant:!1,payable:!1,type:"function",gas:175875},{name:"addLiquidity",outputs:[{type:"uint256",name:"out"}],inputs:[{type:"uint256",name:"min_liquidity"},{type:"uint256",name:"max_tokens"},{type:"uint256",name:"deadline"}],constant:!1,payable:!0,type:"function",gas:82616},{name:"removeLiquidity",outputs:[{type:"uint256",name:"out"},{type:"uint256",name:"out"}],inputs:[{type:"uint256",name:"amount"},{type:"uint256",name:"min_eth"},{type:"uint256",name:"min_tokens"},{type:"uint256",name:"deadline"}],constant:!1,payable:!1,type:"function",gas:116814},{name:"__default__",outputs:[],inputs:[],constant:!1,payable:!0,type:"function"},{name:"ethToTokenSwapInput",outputs:[{type:"uint256",name:"out"}],inputs:[{type:"uint256",name:"min_tokens"},{type:"uint256",name:"deadline"}],constant:!1,payable:!0,type:"function",gas:12757},{name:"ethToTokenTransferInput",outputs:[{type:"uint256",name:"out"}],inputs:[{type:"uint256",name:"min_tokens"},{type:"uint256",name:"deadline"},{type:"address",name:"recipient"}],constant:!1,payable:!0,type:"function",gas:12965},{name:"ethToTokenSwapOutput",outputs:[{type:"uint256",name:"out"}],inputs:[{type:"uint256",name:"tokens_bought"},{type:"uint256",name:"deadline"}],constant:!1,payable:!0,type:"function",gas:50463},{name:"ethToTokenTransferOutput",outputs:[{type:"uint256",name:"out"}],inputs:[{type:"uint256",name:"tokens_bought"},{type:"uint256",name:"deadline"},{type:"address",name:"recipient"}],constant:!1,payable:!0,type:"function",gas:50671},{name:"tokenToEthSwapInput",outputs:[{type:"uint256",name:"out"}],inputs:[{type:"uint256",name:"tokens_sold"},{type:"uint256",name:"min_eth"},{type:"uint256",name:"deadline"}],constant:!1,payable:!1,type:"function",gas:47503},{name:"tokenToEthTransferInput",outputs:[{type:"uint256",name:"out"}],inputs:[{type:"uint256",name:"tokens_sold"},{type:"uint256",name:"min_eth"},{type:"uint256",name:"deadline"},{type:"address",name:"recipient"}],constant:!1,payable:!1,type:"function",gas:47712},{name:"tokenToEthSwapOutput",outputs:[{type:"uint256",name:"out"}],inputs:[{type:"uint256",name:"eth_bought"},{type:"uint256",name:"max_tokens"},{type:"uint256",name:"deadline"}],constant:!1,payable:!1,type:"function",gas:50175},{name:"tokenToEthTransferOutput",outputs:[{type:"uint256",name:"out"}],inputs:[{type:"uint256",name:"eth_bought"},{type:"uint256",name:"max_tokens"},{type:"uint256",name:"deadline"},{type:"address",name:"recipient"}],constant:!1,payable:!1,type:"function",gas:50384},{name:"tokenToTokenSwapInput",outputs:[{type:"uint256",name:"out"}],inputs:[{type:"uint256",name:"tokens_sold"},{type:"uint256",name:"min_tokens_bought"},{type:"uint256",name:"min_eth_bought"},{type:"uint256",name:"deadline"},{type:"address",name:"token_addr"}],constant:!1,payable:!1,type:"function",gas:51007},{name:"tokenToTokenTransferInput",outputs:[{type:"uint256",name:"out"}],inputs:[{type:"uint256",name:"tokens_sold"},{type:"uint256",name:"min_tokens_bought"},{type:"uint256",name:"min_eth_bought"},{type:"uint256",name:"deadline"},{type:"address",name:"recipient"},{type:"address",name:"token_addr"}],constant:!1,payable:!1,type:"function",gas:51098},{name:"tokenToTokenSwapOutput",outputs:[{type:"uint256",name:"out"}],inputs:[{type:"uint256",name:"tokens_bought"},{type:"uint256",name:"max_tokens_sold"},{type:"uint256",name:"max_eth_sold"},{type:"uint256",name:"deadline"},{type:"address",name:"token_addr"}],constant:!1,payable:!1,type:"function",gas:54928},{name:"tokenToTokenTransferOutput",outputs:[{type:"uint256",name:"out"}],inputs:[{type:"uint256",name:"tokens_bought"},{type:"uint256",name:"max_tokens_sold"},{type:"uint256",name:"max_eth_sold"},{type:"uint256",name:"deadline"},{type:"address",name:"recipient"},{type:"address",name:"token_addr"}],constant:!1,payable:!1,type:"function",gas:55019},{name:"tokenToExchangeSwapInput",outputs:[{type:"uint256",name:"out"}],inputs:[{type:"uint256",name:"tokens_sold"},{type:"uint256",name:"min_tokens_bought"},{type:"uint256",name:"min_eth_bought"},{type:"uint256",name:"deadline"},{type:"address",name:"exchange_addr"}],constant:!1,payable:!1,type:"function",gas:49342},{name:"tokenToExchangeTransferInput",outputs:[{type:"uint256",name:"out"}],inputs:[{type:"uint256",name:"tokens_sold"},{type:"uint256",name:"min_tokens_bought"},{type:"uint256",name:"min_eth_bought"},{type:"uint256",name:"deadline"},{type:"address",name:"recipient"},{type:"address",name:"exchange_addr"}],constant:!1,payable:!1,type:"function",gas:49532},{name:"tokenToExchangeSwapOutput",outputs:[{type:"uint256",name:"out"}],inputs:[{type:"uint256",name:"tokens_bought"},{type:"uint256",name:"max_tokens_sold"},{type:"uint256",name:"max_eth_sold"},{type:"uint256",name:"deadline"},{type:"address",name:"exchange_addr"}],constant:!1,payable:!1,type:"function",gas:53233},{name:"tokenToExchangeTransferOutput",outputs:[{type:"uint256",name:"out"}],inputs:[{type:"uint256",name:"tokens_bought"},{type:"uint256",name:"max_tokens_sold"},{type:"uint256",name:"max_eth_sold"},{type:"uint256",name:"deadline"},{type:"address",name:"recipient"},{type:"address",name:"exchange_addr"}],constant:!1,payable:!1,type:"function",gas:53423},{name:"getEthToTokenInputPrice",outputs:[{type:"uint256",name:"out"}],inputs:[{type:"uint256",name:"eth_sold"}],constant:!0,payable:!1,type:"function",gas:5542},{name:"getEthToTokenOutputPrice",outputs:[{type:"uint256",name:"out"}],inputs:[{type:"uint256",name:"tokens_bought"}],constant:!0,payable:!1,type:"function",gas:6872},{name:"getTokenToEthInputPrice",outputs:[{type:"uint256",name:"out"}],inputs:[{type:"uint256",name:"tokens_sold"}],constant:!0,payable:!1,type:"function",gas:5637},{name:"getTokenToEthOutputPrice",outputs:[{type:"uint256",name:"out"}],inputs:[{type:"uint256",name:"eth_bought"}],constant:!0,payable:!1,type:"function",gas:6897},{name:"tokenAddress",outputs:[{type:"address",name:"out"}],inputs:[],constant:!0,payable:!1,type:"function",gas:1413},{name:"factoryAddress",outputs:[{type:"address",name:"out"}],inputs:[],constant:!0,payable:!1,type:"function",gas:1443},{name:"balanceOf",outputs:[{type:"uint256",name:"out"}],inputs:[{type:"address",name:"_owner"}],constant:!0,payable:!1,type:"function",gas:1645},{name:"transfer",outputs:[{type:"bool",name:"out"}],inputs:[{type:"address",name:"_to"},{type:"uint256",name:"_value"}],constant:!1,payable:!1,type:"function",gas:75034},{name:"transferFrom",outputs:[{type:"bool",name:"out"}],inputs:[{type:"address",name:"_from"},{type:"address",name:"_to"},{type:"uint256",name:"_value"}],constant:!1,payable:!1,type:"function",gas:110907},{name:"approve",outputs:[{type:"bool",name:"out"}],inputs:[{type:"address",name:"_spender"},{type:"uint256",name:"_value"}],constant:!1,payable:!1,type:"function",gas:38769},{name:"allowance",outputs:[{type:"uint256",name:"out"}],inputs:[{type:"address",name:"_owner"},{type:"address",name:"_spender"}],constant:!0,payable:!1,type:"function",gas:1925},{name:"name",outputs:[{type:"bytes32",name:"out"}],inputs:[],constant:!0,payable:!1,type:"function",gas:1623},{name:"symbol",outputs:[{type:"bytes32",name:"out"}],inputs:[],constant:!0,payable:!1,type:"function",gas:1653},{name:"decimals",outputs:[{type:"uint256",name:"out"}],inputs:[],constant:!0,payable:!1,type:"function",gas:1683},{name:"totalSupply",outputs:[{type:"uint256",name:"out"}],inputs:[],constant:!0,payable:!1,type:"function",gas:1713}]},3319:function(t,e,n){"use strict";n.r(e);var a=n(5),r=n.n(a),i=n(206),o=n.n(i),s=(n(1462),n(32)),u=n(167),c=n(0),p=n.n(c),d=n(17),l=n(210),f=n(728),y=n(718),m=n(76),b=n(3327),h=n(3331),v=n(3332),x=n(1320),g=n.n(x),w=n(1321),k=n.n(w),T=n(1322),O=n.n(T),C=n(1323),E=n.n(C),_=n(3335),j=n(3334),A=n(3329),S=n(3336),M=n(3333),P=n(1324),B=n.n(P),R=function(t){var e=t.depositHandler,n=Object(a.useState)(""),i=Object(s.a)(n,2),o=i[0],u=i[1];return console.log("Deposit handler",e),Object(a.useEffect)(function(){!o&&e&&e.address&&e.bitcoinAddress.then(u)},[o,e]),Object(a.useEffect)(function(){o&&B.a.toCanvas(document.getElementById("canvas"),o)},[o]),r.a.createElement("canvas",{id:"canvas"})},I=function(t,e,n){return!e&&!n||2===t?"Select deposit amount":1===t?"One more signature left to go!":0===t?"Deposit created":void 0},F=(n(2070),n(191),n(2079),n(720)),D=n.n(F),N=n(309),L=n.n(N),K=(n(2080),n(12)),W=n(1325),z=(n(2083),n(1326)),q=n.n(z),H=n(1289),V=n(3249);console.log("ABI1",H),console.log("ABI2",V);var U=new D.a("pk_test_001FD198F278ECC9","ropsten").getProvider(),X=new L.a(U),G=function(){var t=Object(d.a)(p.a.mark(function t(e,n,a,r,i){var o,s,u,c;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("BITCOIN ADDRESS JUST RESOLVED ",e),a(1),r(!1),t.next=5,n.getSatoshiLotSize();case 5:return o=t.sent.toNumber(),console.log("Monitoring Bitcoin for transaction to address ".concat(e,"...")),t.next=9,m.a.Transaction.findOrWaitFor(e,o);case 9:return s=t.sent,console.log("found tx",s),i(!0),t.next=14,n.factory.constantsContract.getTxProofDifficultyFactor();case 14:return u=t.sent.toNumber(),console.log("Waiting for ".concat(u," confirmations for ")+"Bitcoin transaction ".concat(s.transactionID,"...")),t.next=18,m.a.Transaction.waitForConfirmations(s,u);case 18:return console.log("Submitting funding proof to deposit ".concat(n.address," for ")+"Bitcoin transaction ".concat(s.transactionID,"...")),t.next=21,n.constructFundingProof(s,u);case 21:c=t.sent,console.log("just constructed proof args",c),c.push({from:n.factory.config.web3.eth.defaultAccount}),n.contract.provideBTCFundingProof.apply(n.contract,c),console.log("submitted the proof");case 26:case"end":return t.stop()}},t)}));return function(e,n,a,r,i){return t.apply(this,arguments)}}(),J=function(t,e,n){return Object(a.useEffect)(function(){return function(t,e,n){!function(){var a=Object(d.a)(p.a.mark(function a(){var r,i,o,u,c,d;return p.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=new L.a(U),a.next=3,r.eth.getAccounts();case 3:return i=a.sent,o=Object(s.a)(i,1),u=o[0],r.eth.defaultAccount=u,a.prev=7,a.next=10,r.ethereum.enable();case 10:a.next=15;break;case 12:a.prev=12,a.t0=a.catch(7),t(a.t0.message);case 15:return a.next=17,y.a.withConfig({web3:r,bitcoinNetwork:"testnet",electrum:{testnet:{server:"electrumx-server.test.tbtc.network",port:50002,protocol:"ssl"},testnetPublic:{server:"testnet1.bauerj.eu",port:50002,protocol:"ssl"},testnetWS:{server:"electrumx-server.test.tbtc.network",port:50003,protocol:"ws"}}});case 17:return c=a.sent,a.next=20,c.Deposit.availableSatoshiLotSizes();case 20:d=a.sent,e(d),n(c);case 23:case"end":return a.stop()}},a,null,[[7,12]])}));return function(){return a.apply(this,arguments)}}()()}(t,e,n)},[])},Q=function(t,e,n,r,i,o){return Object(a.useEffect)(function(){return function(t,e,n,a,r,i){t&&!n&&(console.log("BITCOIN TX LISTENER IS ABOUT TO GET REGISTERED"),e(!0),t.onActive(Object(d.a)(p.a.mark(function e(){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.mintTBTC();case 2:n=e.sent,console.log(n,"SUCCESS!");case 4:case"end":return e.stop()}},e)}))),t.bitcoinAddress.then(function(e){return G(e,t,a,r,i)}))}(t,e,n,r,i,o)},[t,n,e])};function Y(){var t=Object(l.a)(["\n  @media screen and (max-width: 992px) {\n    display: none;\n  }\n}\n"]);return Y=function(){return t},t}function Z(){var t=Object(l.a)(["\n  margin-top: 10px;\n  padding-left: 68px;\n"]);return Z=function(){return t},t}function $(){var t=Object(l.a)(["\n  /* padding-top: 7px;\n  padding-bottom: 5px; */\n  /* padding-top: 20px; */\n  background-color: white;\n  margin: 0 auto;\n"]);return $=function(){return t},t}function tt(){var t=Object(l.a)(["\n  font-size: 32px;\n  font-weight: 500;\n  display: inline;\n"]);return tt=function(){return t},t}function et(){var t=Object(l.a)(["\n  /* margin-top: -11px; */\n  padding-right: 20px;\n"]);return et=function(){return t},t}function nt(){var t=Object(l.a)(["\n  left: 0;\n  position: fixed;\n  top: 104px;\n"]);return nt=function(){return t},t}function at(){var t=Object(l.a)(["\n  --button-default-height: 48px;\n  --button-default-font-size: 14px;\n  --button-default-border-radius: 6px;\n  --button-horizontal-padding: 20px;\n  --button-raise-level: 5px;\n  --button-hover-pressure: 2;\n  --transform-speed: 0.185s;\n  --button-primary-color: #3d66ff;\n  --button-primary-color-dark: #2a3143;\n  --button-primary-color-light: #d4d9e4;\n  --button-primary-color-hover: #213fad;\n  --button-primary-border: none;\n  --button-secondary-color: #fffc6c;\n  --button-secondary-color-dark: #b9b500;\n  --button-secondary-color-light: #6c6a00;\n  --button-secondary-color-hover: #fffb3e;\n  --button-secondary-border: none;\n  --button-anchor-color: #f3c8ad;\n  --button-anchor-color-dark: #734922;\n  --button-anchor-color-light: #4c3016;\n  --button-anchor-color-hover: #f1bfa0;\n  --button-anchor-border: 1px solid #8c633c;\n"]);return at=function(){return t},t}var rt=Object(K.default)(W.AwesomeButton)(at()),it=new L.a(window.ethereum),ot={radioButton:{check:{color:"#1A5AFE"}},global:{font:{family:"Rubik, sans-serif !important"}}},st=K.default.img(nt()),ut=K.default.img(et()),ct=K.default.div(tt()),pt=Object(K.default)(_.a)($()),dt=K.default.div(Z()),lt=(n(3254),n(1289)),ft=function(){var t=Object(d.a)(p.a.mark(function t(e){var n;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=new it.eth.Contract(lt,"0x083f652051b9CdBf65735f98d83cc329725Aa957"),t.prev=1,t.next=4,n.methods.approve("0xb40d042a65dd413ae0fd85becf8d722e16bc46f1",it.utils.toBN(1e19)).send({from:e});case 4:t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),console.error("Error approving contract",t.t0);case 10:case"end":return t.stop()}},t,null,[[1,7]])}));return function(e){return t.apply(this,arguments)}}(),yt=function(){var t=Object(d.a)(p.a.mark(function t(e,n){var a,r,i;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=new it.eth.Contract(lt,"0xb40d042a65dd413ae0fd85becf8d722e16bc46f1"),window.ctoken=a,r=it.utils.toWei(".1","ether"),t.prev=3,t.next=6,a.methods.mint(r).send({from:e});case 6:i=t.sent,console.log("receipt",i),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),console.error("Err minting",t.t0);case 13:case"end":return t.stop()}},t,null,[[3,10]])}));return function(e,n){return t.apply(this,arguments)}}(),mt=Object(K.default)(b.a)(Y()),bt=function(t){return t/1e8},ht=function(t){var e=t.image,n=t.loading,a=t.headerText,i=t.stepDone,o=t.style;return console.log(e,"image"),r.a.createElement("div",{style:Object(u.a)({display:"flex",marginRight:"10px"},o)},r.a.createElement("div",{style:{display:"inline"}},r.a.createElement(ut,{src:i?E.a:e,alt:"first step"}),n&&r.a.createElement(f.a,{size:"48px",style:{marginLeft:"-68px",marginTop:"-11px",marginRight:"10px"}})),r.a.createElement("div",{style:{marginTop:"11px",display:"inline"}},r.a.createElement(ct,null,a)))},vt=function(){var t=Object(a.useState)(-1),e=Object(s.a)(t,2),n=e[0],i=e[1],o=Object(a.useState)(!1),u=Object(s.a)(o,2),c=u[0],l=u[1],y=Object(a.useState)(2),m=Object(s.a)(y,2),x=m[0],w=m[1],T=Object(a.useState)(!1),C=Object(s.a)(T,2),E=C[0],_=C[1],P=Object(a.useState)(!1),B=Object(s.a)(P,2),F=B[0],D=B[1],N=Object(a.useState)(""),L=Object(s.a)(N,2),K=(L[0],L[1]),W=Object(a.useState)([]),z=Object(s.a)(W,2),Y=z[0],Z=z[1],$=Object(a.useState)([!1]),tt=Object(s.a)($,2),et=(tt[0],tt[1],Object(a.useState)(null)),nt=Object(s.a)(et,2),at=nt[0],it=nt[1],ut=Object(a.useState)(null),ct=Object(s.a)(ut,2),lt=ct[0],vt=ct[1],xt=Object(a.useState)(!1),gt=Object(s.a)(xt,2),wt=gt[0],kt=gt[1],Tt=Object(a.useState)(null),Ot=Object(s.a)(Tt,2),Ct=Ot[0],Et=Ot[1],_t=Object(a.useState)(""),jt=Object(s.a)(_t,2),At=jt[0],St=jt[1],Mt=function(){var t=Object(a.useState)(""),e=Object(s.a)(t,2),n=e[0],r=e[1],i=Object(a.useState)({CTBTC:0,TBTC:0}),o=Object(s.a)(i,2),u=o[0],c=o[1];return Object(a.useEffect)(function(){!function(){var t=Object(d.a)(p.a.mark(function t(){var e,n,a,i,o,u,d;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=new X.eth.Contract(H,"0xb40d042a65dd413ae0fd85becf8d722e16bc46f1"),n=new X.eth.Contract(V,"0x083f652051b9CdBf65735f98d83cc329725Aa957"),t.next=4,X.eth.getAccounts();case 4:if(a=t.sent,i=Object(s.a)(a,1),!(o=i[0])){t.next=19;break}return r(o),t.next=11,e.methods.balanceOfUnderlying(o).call();case 11:return u=t.sent,t.next=14,n.methods.balanceOf(o).call();case 14:d=t.sent,c({CTBTC:u,TBTC:d}),console.log(d,u,o),t.next=20;break;case 19:console.error("Could not get current account");case 20:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()()},[X]),{currentAddress:n,balances:u}}(),Pt=Mt.currentAddress,Bt=Mt.balances,Rt=function(t){var e=Object(a.useState)(""),n=Object(s.a)(e,2),r=n[0],i=n[1],o=Object(a.useState)(null),u=Object(s.a)(o,2),c=u[0],l=u[1];return Object(a.useEffect)(function(){!function(){var e=Object(d.a)(p.a.mark(function e(){var n,a,r,o,u,c,d;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X.eth.getAccounts();case 2:return n=e.sent,a=Object(s.a)(n,1),r=a[0],e.next=7,q.a.create(U);case 7:return o=e.sent,u=["tbtc-deposit"],e.next=11,o.auth(u,{address:r});case 11:return e.next=13,o.openSpace("tbtc-deposit");case 13:return c=e.sent,e.next=16,c.syncDone;case 16:return e.next=18,c.public.get("tbtc-deposit");case 18:d=e.sent,t(0),i(d||""),l(c);case 22:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[]),{pendingDepositAddress:r,tbtcDepositSpace:c}}(i),It=Rt.pendingDepositAddress,Ft=Rt.tbtcDepositSpace;return J(K,Z,it),Q(lt,kt,wt,i,l,D),function(t,e,n,r,i,o,s,u,c){Object(a.useEffect)(function(){var a=function(){var n=Object(d.a)(p.a.mark(function n(){var a;return p.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r(!0),n.next=3,t.Deposit.withAddress(e,u);case 3:a=n.sent,i(a),a.onActive(Object(d.a)(p.a.mark(function t(){var e;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.mintTBTC();case 2:e=t.sent,console.log(e,"SUCCESS!");case 4:case"end":return t.stop()}},t)}))),a.bitcoinAddress.then(function(t){return G(t,a,o,s,c)});case 7:case"end":return n.stop()}},n)}));return function(){return n.apply(this,arguments)}}();t&&e&&!n&&(console.log("listening for a pending deposit"),u(1),a())},[t,e,n,r,i])}(at,It,wt,kt,vt,i,l,w,D),r.a.createElement(j.a,{theme:ot},r.a.createElement(A.a,{pad:"small",style:{textAlign:"center",borderBottom:"1px solid #DFE0E5"}},r.a.createElement(pt,{size:"small",color:"#1A5AFE"},"Convert BTC to TBTC")),r.a.createElement("button",{onClick:Object(d.a)(p.a.mark(function t(){return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ft.public.remove("tbtc-deposit");case 2:case"end":return t.stop()}},t)}))},"Erase 3Box"),r.a.createElement(h.a,{style:{paddingTop:"40px"}},r.a.createElement(v.a,null,r.a.createElement(mt,{md:2,sm:0},r.a.createElement(st,{src:g.a,alt:"dots for fun"})),r.a.createElement(b.a,{md:10,sm:12},r.a.createElement(ht,{image:k.a,stepDone:n>0,headerText:I(x,E,It),loading:0===n&&c}),x>1&&r.a.createElement(dt,null,Y&&Y.length>0?r.a.createElement(r.a.Fragment,null,Y.map(function(t,e){return r.a.createElement(S.a,{key:e,checked:Ct===t,onChange:function(){Et(t)},label:"".concat(bt(t)," BTC"),name:"".concat(bt(t)," BTC")})})):r.a.createElement("div",null,r.a.createElement(f.a,null)),Ct&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{paddingTop:"20px"}},"Once you click \u201ccreate deposit\u201d, you\u2019ll be prompted twice to sign messages.")),r.a.createElement(rt,{"button-default-border-radius":"6px",style:{marginTop:"14px"},disabled:!Ct||Ct.lte(0)||0!==n,onPress:Object(d.a)(p.a.mark(function t(){var e;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return l(!0),_(!0),t.next=4,at.Deposit.withSatoshiLotSize(Ct,w);case 4:e=t.sent,console.log("got deposit"),Ft.public.set("tbtc-deposit",e.address),console.log("set in 3box space"),vt(e);case 9:case"end":return t.stop()}},t)}))},"Create ".concat(Ct?bt(Ct):""," BTC Deposit"))),r.a.createElement(ht,{style:{marginTop:"55px "},image:O.a,stepDone:n>1,headerText:"Send BTC",loading:!1}),!F&&r.a.createElement(dt,null,r.a.createElement(R,{shouldDisplay:lt&&lt.address,depositHandler:lt})),r.a.createElement("div",null,r.a.createElement(rt,{onPress:ft(Pt),style:{marginTop:"14px"}},"Approve"),r.a.createElement("h1",null," ","Current Address: ".concat(Pt)),r.a.createElement("h1",null," ","TBTC Balance: ".concat(Bt.TBTC)),r.a.createElement("h1",null," ","CTBTC Balance: ".concat(Bt.CTBTC))),r.a.createElement(M.a,{label:"Mint Compound BTC",value:At,onChange:function(t){return St(t.target.value)}}),r.a.createElement(rt,{onPress:yt(Pt,At)},"Mint cTBtc")))))};o.a.render(r.a.createElement(vt,null),document.getElementById("root"))},604:function(t,e){},627:function(t,e){},687:function(t,e){},718:function(t,e,n){"use strict";(function(t){var a=n(0),r=n.n(a),i=n(17),o=n(15),s=n(16),u=n(1303),c={TESTNET:"testnet",MAINNET:"mainnet"},p={bitcoinNetwork:c.TESTNET,web3:t.Web3};function d(t){return 1==t.currentProvider.chainId}var l=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(Object(o.a)(this,t),a&&d(n.web3)&&n.bitcoinNetwork==c.TESTNET||!d(n.web3)&&n.bitcoinNetwork==c.MAINNET)throw new Error("Ethereum network ".concat(n.web3.currentProvider.chainId," ")+"and Bitcoin network ".concat(n.bitcoinNetwork," are not both ")+"on testnet or both on  mainnet. Quitting while we're ahead. Developers can also pass false as the networkMatchCheck parameter to suppress this error.");this.depositFactory=e,this.config=n}return Object(s.a)(t,null,[{key:"withConfig",value:function(){var e=Object(i.a)(r.a.mark(function e(){var n,a,i,o=arguments;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>0&&void 0!==o[0]?o[0]:p,a=!(o.length>1&&void 0!==o[1])||o[1],e.next=4,u.a.withConfig(n);case 4:return i=e.sent,e.abrupt("return",new t(i,n,a));case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()}]),Object(s.a)(t,[{key:"Deposit",get:function(){return this.depositFactory}}]),t}();e.a={withConfig:function(){var t=Object(i.a)(r.a.mark(function t(e){var n,a=arguments;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=!(a.length>1&&void 0!==a[1])||a[1],t.next=3,l.withConfig(e,n);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}}).call(this,n(21))},723:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var a=n(0),r=n.n(a),i=n(17),o=n(15),s=n(16),u=n(19),c=n.n(u),p=n(76),d=n(129),l=function(){function t(e,n){var a=this;Object(o.a)(this,t),this.deposit=e,this.withdrawnEmitter=new c.a,this.redemptionDetails=this.getLatestRedemptionDetails(n),this.unsignedTransactionDetails=this.redemptionDetails.then(function(t){var e=t.utxoSize.sub(t.requestedFee);return{hex:p.a.Transaction.constructOneInputOneOutputWitnessTransaction(t.outpoint.replace("0x",""),0,e.toNumber(),t.requesterPKH.replace("0x","")),digest:t.digest}}),this.signedTransaction=this.unsignedTransactionDetails.then(function(){var t=Object(i.a)(r.a.mark(function t(e){var n,i,o,s,u,c,l;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.debug("Looking up latest redemption details for deposit "+"".concat(a.deposit.address,"...")),t.next=3,a.redemptionDetails;case 3:return n=t.sent.digest,console.debug("Finding or waiting for transaction signature for deposit "+"".concat(a.deposit.address,"...")),t.next=7,d.a.getEvent(a.deposit.keepContract,"SignatureSubmitted",{digest:n});case 7:return i=t.sent,o=i.args,s=o.r,u=o.s,t.next=11,a.deposit.publicKeyPoint;case 11:return c=t.sent,l=p.a.Transaction.addWitnessSignature(e.hex,0,s.replace("0x",""),u.replace("0x",""),p.a.publicKeyPointToPublicKeyString(c.x,c.y)),t.abrupt("return",l);case 14:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())}return Object(s.a)(t,[{key:"autoSubmit",value:function(){var t=this;this.autoSubmitting||(this.autoSubmitting=!0,this.signedTransaction.then(function(){var e=Object(i.a)(r.a.mark(function e(n){var a,i,o,s,u,c,d,l;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.debug("Looking for existing signed redemption transaction on Bitcoin "+"chain for deposit ".concat(t.deposit.address,"...")),e.next=3,t.redemptionDetails;case 3:return a=e.sent,i=a.utxoSize,o=a.requestedFee,s=a.requesterPKH,u=i.sub(o).toNumber(),c=p.a.Address.pubKeyHashToBech32(s.replace("0x",""),t.deposit.factory.config.bitcoinNetwork),e.next=11,p.a.Transaction.find(c,u);case 11:if(d=e.sent){e.next=17;break}return console.debug("Broadcasting signed redemption transaction to Bitcoin chain "+"for deposit ".concat(t.deposit.address,"...")),e.next=16,p.a.Transaction.broadcast(n);case 16:d=e.sent;case 17:return e.next=19,t.deposit.factory.constantsContract.getTxProofDifficultyFactor();case 19:return l=e.sent.toNumber(),console.debug("Waiting for ".concat(l," confirmations for ")+"Bitcoin transaction ".concat(d.transactionID,"...")),e.next=23,p.a.Transaction.waitForConfirmations(d,l);case 23:console.debug("Transaction is sufficiently confirmed; submitting redemption "+"proof to deposit ".concat(t.deposit.address,"...")),t.proveWithdrawal(d.transactionID,l);case 25:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()))}},{key:"proveWithdrawal",value:function(){var t=Object(i.a)(r.a.mark(function t(e,n){var a,i;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=4;break}return t.next=3,this.deposit.factory.constantsContract.getTxProofDifficultyFactor();case 3:n=t.sent.toNumber();case 4:return a={transactionID:e,outputPosition:"output position"},t.next=7,this.deposit.constructFundingProof(a,n);case 7:return(i=t.sent).push({from:this.deposit.factory.config.web3.eth.defaultAccount}),t.next=11,this.deposit.contract.provideRedemptionProof.apply(this.deposit.contract,i.filter(function(t){return"output position"!=t}));case 11:this.withdrawnEmitter.emit("withdrawn",e);case 12:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"onBitcoinTransactionSigned",value:function(t){this.signedTransaction.then(t)}},{key:"onWithdrawn",value:function(t){this.withdrawnEmitter.on("withdrawn",t)}},{key:"getLatestRedemptionDetails",value:function(){var t=Object(i.a)(r.a.mark(function t(e){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=2;break}return t.abrupt("return",e);case 2:return t.next=4,this.deposit.getLatestRedemptionDetails();case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}]),t}()},76:function(t,e,n){"use strict";(function(t){var a=n(167),r=n(0),i=n.n(r),o=n(17),s=n(388),u=n.n(s),c=n(382),p=n.n(c),d=n(719),l=n.n(d),f=n(505),y=n.n(f),m=n(181),b=n.n(m),h=n(1304),v=n(1307),x=n(1308),g=p.a.KeyRing,w=l.a.Script,k={electrumConfig:null,setElectrumConfig:function(t){k.electrumConfig=t},signatureDER:function(e,n){var a=u.a.size,r=new y.a(a,t.from(e,"hex"),t.from(n,"hex")),i=u.a.signatureNormalize(r.encode(a));return y.a.toDER(i,a)},publicKeyPointToPublicKeyString:function(t,e){return"".concat(t.replace("0x","")).concat(e.replace("0x",""))},Address:{pubKeyHashFrom:function(t){return b.a.Script.fromAddress(t).getWitnessPubkeyhash()},publicKeyPointToP2WPKHAddress:function(t,e,n){return this.publicKeyToP2WPKHAddress(k.publicKeyPointToPublicKeyString(t,e),n)},pubKeyHashToBech32:function(e,n){return w.fromProgram(0,t.from(e,"hex")).getAddress().toBech32(n)},publicKeyToP2WPKHAddress:function(e,n){var a=t.from(e,"hex"),r=u.a.publicKeyImport(a,!0),i=g.fromKey(r,!0);return w.fromProgram(0,i.getKeyHash()).getAddress().toString(n)},toScript:function(t){return w.fromAddress(t).toRaw().toString("hex")}},withElectrumClient:function(){var t=Object(o.a)(i.a.mark(function t(e){var n,a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=new x.a(k.electrumConfig.testnetWS),t.next=3,n.connect();case 3:return(a=e(n)).then(function(){n.close()},function(){n.close()}),t.abrupt("return",a);case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),Transaction:{find:function(){var t=Object(o.a)(i.a.mark(function t(e,n){var a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=k.Address.toScript(e),t.next=3,k.withElectrumClient(function(t){return k.Transaction.findWithClient(t,a,n)});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}(),findOrWaitFor:function(){var t=Object(o.a)(i.a.mark(function t(e,n){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.withElectrumClient(function(){var t=Object(o.a)(i.a.mark(function t(a){var r,s;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=k.Address.toScript(e),s=function(){var t=Object(o.a)(i.a.mark(function t(e){var o;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=3;break}return o=k.Transaction.findWithClient(a,r,n),t.abrupt("return",o);case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),t.abrupt("return",a.onTransactionToScript(r,s));case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}());case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}(),checkForConfirmations:function(){var t=Object(o.a)(i.a.mark(function t(e,n){var a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.transactionID,t.abrupt("return",k.withElectrumClient(function(){var t=Object(o.a)(i.a.mark(function t(e){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.Transaction.checkForConfirmationsWithClient(e,a,n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 2:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}(),waitForConfirmations:function(){var t=Object(o.a)(i.a.mark(function t(e,n){var a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.transactionID,t.abrupt("return",k.withElectrumClient(function(){var t=Object(o.a)(i.a.mark(function t(e){var r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=function(){var t=Object(o.a)(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.Transaction.checkForConfirmationsWithClient(e,a,n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),t.abrupt("return",e.onNewBlock(r));case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 2:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}(),estimateFee:function(){var t=Object(o.a)(i.a.mark(function t(e){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.getMinimumRedemptionFee());case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),parseRaw:function(t){return v.a.parse(t)},getSPVProof:function(){var t=Object(o.a)(i.a.mark(function t(e,n){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.withElectrumClient(function(){var t=Object(o.a)(i.a.mark(function t(r){var o,s;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=new h.a(r),t.next=3,o.getTransactionProof(e,n);case 3:return s=t.sent,t.abrupt("return",Object(a.a)({},s,{parsedTransaction:k.Transaction.parseRaw(s.tx)}));case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}());case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}(),broadcast:function(){var t=Object(o.a)(i.a.mark(function t(e){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.withElectrumClient(function(){var t=Object(o.a)(i.a.mark(function t(n){var a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.broadcastTransaction(e);case 2:return a=t.sent,t.abrupt("return",{transactionID:a});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}());case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),addWitnessSignature:function(e,n,a,r,i){var o;try{o=k.signatureDER(a,r)}catch(f){throw new Error("failed to convert signature to DER format: [".concat(f,"]"))}var s,c,p=t.from([b.a.Script.hashType.ALL]),d=t.concat([o,p]);try{var l=t.from(i,"hex");s=u.a.publicKeyImport(l,!0)}catch(f){throw new Error("failed to import public key: [".concat(f,"]"))}try{c=b.a.TX.fromRaw(e,"hex").clone()}catch(f){throw new Error("failed to import transaction: [".concat(f,"]"))}return c.inputs[n].witness.fromItems([d,s]),c.toRaw().toString("hex")},constructOneInputOneOutputWitnessTransaction:function(e,n,a,r){var i=b.a.Outpoint.fromRaw(t.from(e,"hex")),o=b.a.Input.fromOptions({prevout:i,sequence:n}),s=b.a.Script.fromProgram(0,t.from(r,"hex")),u=b.a.Output.fromOptions({value:a,script:s});return b.a.TX.fromOptions({inputs:[o],outputs:[u]}).toRaw().toString("hex")},findWithClient:function(){var t=Object(o.a)(i.a.mark(function t(e,n,a){var r,o,s,u,c,p,d;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getUnspentToScript(n);case 2:r=t.sent,o=!0,s=!1,u=void 0,t.prev=6,c=r.reverse()[Symbol.iterator]();case 8:if(o=(p=c.next()).done){t.next=15;break}if((d=p.value).value!=a){t.next=12;break}return t.abrupt("return",{transactionID:d.tx_hash,outputPosition:d.tx_pos,value:d.value});case 12:o=!0,t.next=8;break;case 15:t.next=21;break;case 17:t.prev=17,t.t0=t.catch(6),s=!0,u=t.t0;case 21:t.prev=21,t.prev=22,o||null==c.return||c.return();case 24:if(t.prev=24,!s){t.next=27;break}throw u;case 27:return t.finish(24);case 28:return t.finish(21);case 29:case"end":return t.stop()}},t,null,[[6,17,21,29],[22,,24,28]])}));return function(e,n,a){return t.apply(this,arguments)}}(),checkForConfirmationsWithClient:function(){var t=Object(o.a)(i.a.mark(function t(e,n,a){var r,o;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getTransaction(n);case 2:if(r=t.sent,!((o=r.confirmations)>=a)){t.next=6;break}return t.abrupt("return",o);case 6:case"end":return t.stop()}},t)}));return function(e,n,a){return t.apply(this,arguments)}}()}};e.a=k}).call(this,n(1).Buffer)}},[[1457,1,2]]]);
//# sourceMappingURL=main.5a764c66.chunk.js.map